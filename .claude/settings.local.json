{
  "permissions": {
    "allow": [
      "Bash(tree:*)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos log --oneline -20)",
      "Bash(git checkout:*)",
      "Bash(chmod:*)",
      "Bash(/Users/john/projects/photo-video/extract-photos/bin/epm:*)",
      "Bash(echo:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(bash:*)",
      "Bash(uv run pytest:*)",
      "Bash(/Users/john/projects/photo-video/extract-photos/.venv/bin/python:*)",
      "Bash(uv run:*)",
      "Bash(uv add:*)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos status)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos diff)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos log:*)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos add tests/test_utils.py tests/test_borders.py tests/test_extract.py tests/test_epm.sh pyproject.toml uv.lock CLAUDE.md README.md)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos diff --cached --stat)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos commit -m \"$\\(cat <<''EOF''\nAdd tests for utils, borders, border detection, and epm arg parsing\n\nCovers make_safe_folder_name, is_valid_photo, calculate_ssim,\ntrim_and_add_border, detect_almost_uniform_borders \\(Python\\), and\nbin/epm argument parsing \\(bash\\). Adds pytest as dev dependency and\ndocuments test commands in CLAUDE.md and README.md.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos add CLAUDE.md README.md)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos commit --amend --no-edit)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos push -u origin epm)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos add bin/epm extract_photos/extract.py)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos commit -m \"$\\(cat <<''EOF''\nFix UnboundLocalError in process_chunk and auto-update remote repo\n\n- Initialize `progress = 0.0` before the loop so it''s defined even\n  when the loop breaks on the first iteration \\(e.g. AV1 decode failure\\).\n- Shell-escape SSH arguments with printf ''%q'' to prevent the remote\n  login shell from glob-expanding brackets in filenames.\n- Run git pull + uv sync on the remote instead of skipping when the\n  repo already exists, so code changes propagate automatically.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos push)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos checkout main)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos merge epm)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos push origin main)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos stash --include-untracked)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos checkout epm)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos stash pop)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos diff CLAUDE.md README.md)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos commit -m \"$\\(cat <<''EOF''\nUpdate docs: fix epm syntax, document auto-update and quoting\n\n- Fix epm example in CLAUDE.md to use key=value argument syntax.\n- Document that epm auto-updates the remote repo on each run.\n- Add example showing quoted arguments for filenames with brackets.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(ssh:*)",
      "Bash(git push)",
      "WebSearch",
      "WebFetch(domain:immich.app)",
      "WebFetch(domain:docs.immich.app)",
      "WebFetch(domain:api.immich.app)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos add:*)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos commit -m \"$\\(cat <<''EOF''\nAdd Immich album creation and sharing after photo extraction\n\nAfter extracting photos, epm now creates an Immich album from the video\nfilename, adds the new assets to it, and optionally shares with a\nconfigured user. Replaces the previous curl-based library rescan with a\nPython script \\(immich.py\\) that handles the full workflow: scan, poll for\nassets, create/reuse album, add assets, and share.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "WebFetch(domain:github.com)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos rm:*)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos diff --cached)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos commit -m \"$\\(cat <<''EOF''\nAdd HTML coverage report and gitignore coverage artifacts\n\nAdds --cov-report=html to pytest so `htmlcov/` is generated on every\ntest run. Removes the .coverage binary from tracking and gitignores\nboth .coverage and htmlcov/.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(wc:*)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos commit -m \"$\\(cat <<''EOF''\nRemove dead SSIM code, fix imports, clean up test suite\n\nRemove unused calculate_ssim/ssim_threshold threading through 5 files\n\\(utils, extract, batch_processor, main, bin/epm\\). Convert bare imports\nin extract.py and main.py to package-qualified imports so `uv run\npytest` works without sys.path hacks. Delete broken\ntest_batch_processor.py. Remove unused _MAIN_EXTRA_PATCHES from\ntest_immich.py. Add tests for compute_frame_hash, hash_difference,\nformat_time, and build_progress_bar.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos commit -m \"$\\(cat <<''EOF''\nFix ModuleNotFoundError when running via epm on remote\n\nRunning `python extract_photos/main.py` sets sys.path[0] to the\nextract_photos/ directory, breaking package-qualified imports. Switch\nto `python -m extract_photos.main` \\(and immich\\) so Python resolves the\npackage correctly.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos commit -m \"$\\(cat <<''EOF''\nSupport positional input_file argument in epm\n\n`epm /path/to/video.mp4` now works as shorthand for\n`epm input_file=/path/to/video.mp4`. The first bare argument \\(no `=`,\nno leading `-`\\) is treated as the video path. Also adds a 1-second\ntimeout to the stdin read to prevent hanging in subshells, and uses\n`python -m` for module invocation.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos commit -m \"$\\(cat <<''EOF''\nAdd progress bar to Immich-compatibility video transcode\n\nMove the ffprobe/ffmpeg/copy logic from bin/epm \\(bash\\) into a new\nPython function transcode_for_playback\\(\\) in extract.py, reusing the\nexisting _read_ffmpeg_progress helper and progress bar utilities. Shows\npercentage, ETA, and elapsed time — matching the low-res transcode\ndisplay. A thin CLI wrapper \\(transcode_playback.py\\) lets epm call it\nvia python -m.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos commit -m \"$\\(cat <<''EOF''\nReduce Immich transcode intensity: 1080p cap, CRF 28, preset faster\n\nThe Immich copy is for browsing, not archival — the original stays in\nthe movies directory. Lower settings from CRF 18/medium/full-res to\nCRF 28/faster/1080p max, plus 128k AAC. Significantly reduces CPU\ntime and output file size.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos commit -m \"$\\(cat <<''EOF''\nDocument Ctrl-C behavior for epm remote execution\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos commit -m \"$\\(cat <<''EOF''\nImprove epm help text: examples first, show quoting\n\nMove examples to the top of help output with realistic YouTube\nfilenames showing required quoting for brackets. Add examples with\nstep_time, border_px, and update_immich options.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos config core.hooksPath .githooks)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos commit -m \"$\\(cat <<''EOF''\nAdd pre-commit hook to run tests before each commit\n\nHook lives in .githooks/ \\(checked into repo\\). Enable with:\ngit config core.hooksPath .githooks\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(ffprobe:*)",
      "Bash(python3:*)",
      "Bash(ls:*)",
      "Bash(xargs:*)",
      "Bash(sort:*)",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos commit -m \"$\\(cat <<''EOF''\nAdd edge-case integration tests for side-by-side and similar sequential photos\n\nVerify that non-standard photos \\(two photos displayed side-by-side,\nand visually similar photos shown sequentially\\) are both detected and\nextracted. Parses timestamps from test-video/edge-cases.txt.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos commit -m \"$\\(cat <<''EOF''\nAdd edge-case integration tests for side-by-side and similar sequential photos\n\nVerify that non-standard photos \\(two photos displayed side-by-side,\nand visually similar photos shown sequentially\\) are both detected and\nextracted. Parses timestamps from test-video/edge-cases.txt. Tests\nskip gracefully when the edge-cases file is not present.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos commit -m \"$\\(cat <<''EOF''\nUpdate README: mark photo extraction issue as fixed, add --min-photo-pct\n\nMark known issue #2 as resolved with explanation of both fixes\n\\(proportional area threshold and step-to-step hash comparison\\).\nUpdate \"How it works\" to reflect area-based size check. Add\n--min-photo-pct to the options table.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /Users/john/projects/photo-video/extract-photos commit -m \"$\\(cat <<''EOF''\nAdd min_photo_pct option to epm\n\nPass through to --min-photo-pct in main.py. Defaults to 25%.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(ffmpeg:*)"
    ]
  }
}
